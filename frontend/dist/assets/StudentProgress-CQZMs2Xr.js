import{b as v,r as n,j as e,m as i,p as o,T as w,C as z,S as k,g as S,z as C}from"./index-D94il1hI.js";import"./api-DRyY-k3C.js";import{p as A}from"./progressService-CBFsFbNs.js";import{L as T}from"./loader-68blDsed.js";import{R as r,L,C as P,X as R,Y as B,T as c,a as D,b as M,c as K}from"./LineChart-PZ-PjBgp.js";import{R as x,P as m,a as h,b as g,c as j,d as q,e as $}from"./RadarChart-CA6beYha.js";import{F}from"./flame-BxkD0w7v.js";import{B as H}from"./book-open-BMkCaEYn.js";import{T as y}from"./trending-up-CDV_flEY.js";import{C as O}from"./calendar-BAOKU7BH.js";import"./clsx-B-dksMZM.js";const p={level:1,xp:0,xpToNextLevel:100,streak:0,totalQuizzes:0,averageScore:0,studyStats:{totalTime:0,longestStreak:0,avgDuration:0},scoreHistory:[],subjectRadar:[],timeByCategory:[],performanceBySubject:{},strengths:[],weaknesses:[],achievements:[]},E=[{subject:"Math",A:120,fullMark:150},{subject:"Science",A:98,fullMark:150},{subject:"English",A:86,fullMark:150},{subject:"History",A:99,fullMark:150},{subject:"Physics",A:85,fullMark:150},{subject:"Geography",A:65,fullMark:150}],ee=()=>{const{user:l}=v(),[s,d]=n.useState(null),[b,u]=n.useState(!0);if(n.useEffect(()=>{(async()=>{if(l)try{const a=l.id||l._id,N=await A.getStudentProgress(a);d({...p,...N})}catch(a){console.error("Failed to fetch progress:",a),C.error("Failed to load progress data"),d(p)}finally{u(!1)}})()},[l]),b)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center",children:e.jsx(T,{className:"animate-spin text-blue-600",size:48})});if(!s)return null;const f=s.xpToNextLevel>0?Math.min(s.xp/s.xpToNextLevel*100,100):0;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 py-8 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-7xl",children:[e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Your Learning Journey"}),e.jsx("p",{className:"text-gray-600",children:"Track your progress and celebrate your achievements"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 md:col-span-1",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(o,{className:"text-indigo-600",size:20}),"Knowledge Profile"]}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(r,{width:"100%",height:"100%",children:e.jsxs(x,{cx:"50%",cy:"50%",outerRadius:"80%",data:E,children:[e.jsx(m,{}),e.jsx(h,{dataKey:"subject",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(g,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),e.jsx(j,{name:"Me",dataKey:"A",stroke:"#4f46e5",strokeWidth:2,fill:"#6366f1",fillOpacity:.3})]})})}),e.jsx("p",{className:"text-center text-xs text-gray-500 mt-2",children:"Personalized knowledge gap analysis."})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Level"}),e.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:s.level})]}),e.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl",children:e.jsx(w,{className:"text-indigo-600",size:24})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Progress"}),e.jsxs("span",{className:"font-semibold",children:[s.xp,"/",s.xpToNextLevel," XP"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${f}%`}})})]})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Streak"}),e.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[s.streak," Days"]})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:e.jsx(F,{className:"text-orange-600",size:24})})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Longest: ",s.studyStats?.longestStreak||0," days"]})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Quizzes"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.totalQuizzes})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(H,{className:"text-green-600",size:24})})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Avg Score: ",s.averageScore,"%"]})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Study Time"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[Math.floor((s.studyStats?.totalTime||0)/60),"h"]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(z,{className:"text-blue-600",size:24})})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Avg: ",s.studyStats?.avgDuration||0," min/quiz"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(y,{className:"mr-2 text-indigo-600",size:24}),"Score Trend"]}),s.scoreHistory&&s.scoreHistory.length>0?e.jsx(r,{width:"100%",height:300,children:e.jsxs(L,{data:s.scoreHistory,children:[e.jsx(P,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"date"}),e.jsx(B,{domain:[0,100]}),e.jsx(c,{}),e.jsx(D,{}),e.jsx(M,{type:"monotone",dataKey:"score",stroke:"#6366f1",strokeWidth:3,dot:{fill:"#6366f1",r:5}})]})}):e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-400",children:"Not enough data for trend analysis"})]}),e.jsxs(i.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(o,{className:"mr-2 text-purple-600",size:24}),"Subject Performance"]}),s.subjectRadar&&s.subjectRadar.length>0?e.jsx(r,{width:"100%",height:300,children:e.jsxs(x,{data:s.subjectRadar,children:[e.jsx(m,{}),e.jsx(h,{dataKey:"subject"}),e.jsx(g,{domain:[0,100]}),e.jsx(j,{name:"Score",dataKey:"score",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),e.jsx(c,{})]})}):e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-400",children:"Not enough data for subject analysis"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Time by Category"}),s.timeByCategory&&s.timeByCategory.length>0?e.jsx(r,{width:"100%",height:250,children:e.jsxs(q,{children:[e.jsx($,{data:s.timeByCategory,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,percent:a})=>`${t}: ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:s.timeByCategory.map((t,a)=>e.jsx(K,{fill:t.color||"#8884d8"},`cell-${a}`))}),e.jsx(c,{})]})}):e.jsx("div",{className:"h-[250px] flex items-center justify-center text-gray-400",children:"No category data available"})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"lg:col-span-2 bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Subject Breakdown"}),e.jsx("div",{className:"space-y-4",children:s.performanceBySubject&&Object.keys(s.performanceBySubject).length>0?Object.entries(s.performanceBySubject).map(([t,a])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:t}),e.jsxs("span",{className:"text-sm text-gray-600",children:[a.score,"% (",a.quizzes," quizzes)"]})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${a.score>=90?"bg-green-500":a.score>=75?"bg-blue-500":a.score>=60?"bg-amber-500":"bg-red-500"}`,style:{width:`${a.score}%`}})})]},t)):e.jsx("div",{className:"text-gray-400 text-center py-8",children:"Complete quizzes to see subject breakdown"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Strengths & Weaknesses"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-green-600 mb-3 flex items-center",children:[e.jsx(k,{className:"mr-2",size:20}),"Your Strengths"]}),e.jsx("div",{className:"space-y-2",children:s.strengths&&s.strengths.length>0?s.strengths.map((t,a)=>e.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-green-600 mr-2",children:"✓"}),e.jsx("span",{className:"text-gray-700",children:t})]},a)):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"Keep learning to identify strengths!"})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-amber-600 mb-3 flex items-center",children:[e.jsx(y,{className:"mr-2",size:20}),"Areas to Improve"]}),e.jsx("div",{className:"space-y-2",children:s.weaknesses&&s.weaknesses.length>0?s.weaknesses.map((t,a)=>e.jsxs("div",{className:"flex items-center p-3 bg-amber-50 rounded-lg",children:[e.jsx("span",{className:"text-amber-600 mr-2",children:"→"}),e.jsx("span",{className:"text-gray-700",children:t})]},a)):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"Complete more quizzes to identify areas for improvement."})})]})]})]}),e.jsxs(i.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:1},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(S,{className:"mr-2 text-yellow-600",size:24}),"Recent Achievements"]}),e.jsx("div",{className:"space-y-3",children:s.achievements&&s.achievements.length>0?s.achievements.map(t=>e.jsxs("div",{className:"flex items-start p-4 bg-gradient-to-r from-yellow-50 to-amber-50 rounded-xl border border-yellow-200",children:[e.jsx("div",{className:"text-3xl mr-3",children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[e.jsx(O,{size:12,className:"mr-1"}),t.date]})]})]},t.id)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No achievements yet. Start quizzing!"})})]})]})]})})};export{ee as default};
