import{b as j,r as o,j as e,m as c,T as w,A as N,D as u,S as v}from"./index-D94il1hI.js";import"./api-DRyY-k3C.js";import{m as g,g as R}from"./mockData-Bjjcj1M3.js";import{L as S}from"./loader-68blDsed.js";const A={LEARNING:{id:"learning",name:"Learning Milestones",icon:"ðŸ“š",color:"blue"},ACCURACY:{id:"accuracy",name:"Accuracy Masters",icon:"ðŸŽ¯",color:"green"},STREAK:{id:"streak",name:"Streak Warriors",icon:"ðŸ”¥",color:"orange"},SPEED:{id:"speed",name:"Speed Demons",icon:"âš¡",color:"yellow"},CHAMPION:{id:"champion",name:"Quiz Champions",icon:"ðŸ†",color:"purple"},SUBJECT:{id:"subject",name:"Subject Experts",icon:"ðŸ‘‘",color:"indigo"}},E={FIRST_QUIZ:{id:"first_quiz",name:"First Steps",description:"Complete your first quiz",icon:"ðŸŽ¯",category:"learning",rarity:"common",xpReward:50,requirement:1,type:"one-time"},BOOKWORM:{id:"bookworm",name:"Bookworm",description:"Complete 10 quizzes",icon:"ðŸ“–",category:"learning",rarity:"common",xpReward:100,requirement:10,type:"progressive"},SCHOLAR:{id:"scholar",name:"Scholar",description:"Complete 50 quizzes",icon:"ðŸŽ“",category:"learning",rarity:"rare",xpReward:250,requirement:50,type:"progressive"},PROFESSOR:{id:"professor",name:"Professor",description:"Complete 100 quizzes",icon:"ðŸ‘¨â€ðŸŽ“",category:"learning",rarity:"epic",xpReward:500,requirement:100,type:"progressive"},SHARP_SHOOTER:{id:"sharp_shooter",name:"Sharp Shooter",description:"Maintain 90% average accuracy",icon:"ðŸŽ¯",category:"accuracy",rarity:"rare",xpReward:200,requirement:90,type:"one-time"},PERFECTIONIST:{id:"perfectionist",name:"Perfectionist",description:"Get 100% on any quiz",icon:"ðŸ’¯",category:"accuracy",rarity:"rare",xpReward:150,requirement:1,type:"one-time"},SNIPER:{id:"sniper",name:"Sniper",description:"Get 100% on 5 quizzes",icon:"ðŸ¹",category:"accuracy",rarity:"epic",xpReward:300,requirement:5,type:"progressive"},ON_FIRE:{id:"on_fire",name:"On Fire",description:"Maintain a 7-day streak",icon:"ðŸ”¥",category:"streak",rarity:"common",xpReward:100,requirement:7,type:"one-time"},LIGHTNING:{id:"lightning",name:"Lightning",description:"Maintain a 14-day streak",icon:"âš¡",category:"streak",rarity:"rare",xpReward:200,requirement:14,type:"one-time"},SUPERNOVA:{id:"supernova",name:"Supernova",description:"Maintain a 30-day streak",icon:"ðŸŒŸ",category:"streak",rarity:"epic",xpReward:400,requirement:30,type:"one-time"},LEGEND:{id:"legend",name:"Legend",description:"Maintain a 100-day streak",icon:"ðŸ‘‘",category:"streak",rarity:"legendary",xpReward:1e3,requirement:100,type:"one-time"},QUICK_DRAW:{id:"quick_draw",name:"Quick Draw",description:"Complete a quiz in under 5 minutes",icon:"âš¡",category:"speed",rarity:"common",xpReward:75,requirement:1,type:"one-time"},SPEED_DEMON:{id:"speed_demon",name:"Speed Demon",description:"Complete 10 quizzes under time limit",icon:"ðŸš€",category:"speed",rarity:"rare",xpReward:200,requirement:10,type:"progressive"},TIME_MASTER:{id:"time_master",name:"Time Master",description:"Finish 25 quizzes with time to spare",icon:"â±ï¸",category:"speed",rarity:"epic",xpReward:350,requirement:25,type:"progressive"},QUIZ_MASTER:{id:"quiz_master",name:"Quiz Master",description:"Complete 25 quizzes",icon:"ðŸ‘‘",category:"champion",rarity:"rare",xpReward:200,requirement:25,type:"progressive"},CHAMPION:{id:"champion",name:"Champion",description:"Rank in top 10 on leaderboard",icon:"ðŸ†",category:"champion",rarity:"epic",xpReward:500,requirement:10,type:"one-time"},GRAND_MASTER:{id:"grand_master",name:"Grand Master",description:"Reach level 50",icon:"ðŸ‘‘",category:"champion",rarity:"legendary",xpReward:1e3,requirement:50,type:"one-time"},MATH_WIZARD:{id:"math_wizard",name:"Math Wizard",description:"Score 95%+ on 5 math quizzes",icon:"ðŸ§®",category:"subject",rarity:"rare",xpReward:200,requirement:5,type:"progressive"},SCIENCE_GURU:{id:"science_guru",name:"Science Guru",description:"Score 95%+ on 5 science quizzes",icon:"ðŸ”¬",category:"subject",rarity:"rare",xpReward:200,requirement:5,type:"progressive"},HISTORY_BUFF:{id:"history_buff",name:"History Buff",description:"Score 95%+ on 5 history quizzes",icon:"ðŸ“œ",category:"subject",rarity:"rare",xpReward:200,requirement:5,type:"progressive"},GEOGRAPHY_EXPERT:{id:"geography_expert",name:"Geography Expert",description:"Score 95%+ on 5 geography quizzes",icon:"ðŸŒ",category:"subject",rarity:"rare",xpReward:200,requirement:5,type:"progressive"}},q={common:{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"},rare:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},epic:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},legendary:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300"}},I=()=>{const{user:r}=j(),[s,n]=o.useState("all"),[a,d]=o.useState([]),[h,m]=o.useState(!0),[C,y]=o.useState(null);o.useEffect(()=>{(async()=>{if(!r?.id){d(g.userAchievements),m(!1);return}try{m(!0);const i=await R.getUserAchievements(r.id);d(i),y(null)}catch(i){console.error("Failed to fetch achievements:",i),d(g.userAchievements),y(null)}finally{m(!1)}})()},[r?.id]);const l=Object.values(E).map(t=>{const i=a.find(f=>f.achievementId===t.id);return{...t,unlocked:i?.unlocked||!1,unlockedAt:i?.unlockedAt,progress:i?.progress||0,current:i?.current||0}}),b=s==="all"?l:l.filter(t=>t.category===s),p=l.filter(t=>t.unlocked).length,x=l.length;return h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-purple-50 flex items-center justify-center",children:e.jsx(S,{className:"animate-spin text-indigo-600",size:48})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-purple-50 py-8 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-7xl",children:[e.jsxs(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-800 mb-2 flex items-center",children:[e.jsx(w,{className:"mr-3 text-yellow-600",size:40}),"Achievements"]}),e.jsx("p",{className:"text-gray-600",children:"Unlock achievements and earn rewards"})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[p," / ",x]}),e.jsx("p",{className:"text-gray-600",children:"Achievements Unlocked"})]}),e.jsx("div",{className:"text-5xl",children:"ðŸ†"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full transition-all",style:{width:`${p/x*100}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[Math.round(p/x*100),"% Complete"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-8",children:[e.jsx("button",{onClick:()=>n("all"),className:`px-6 py-3 rounded-xl font-semibold transition-all ${s==="all"?"bg-indigo-500 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"All Achievements"}),Object.values(A).map(t=>e.jsxs("button",{onClick:()=>n(t.id),className:`px-6 py-3 rounded-xl font-semibold transition-all flex items-center space-x-2 ${s===t.id?"bg-indigo-500 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[e.jsx("span",{children:t.icon}),e.jsx("span",{children:t.name})]},t.id))]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(N,{mode:"popLayout",children:b.map((t,i)=>e.jsx(z,{achievement:t,index:i},t.id))})})]})})},z=({achievement:r,index:s})=>{const n=q[r.rarity],a=r.unlocked;return e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:s*.05},className:`relative bg-white rounded-2xl shadow-lg p-6 border-2 ${a?n.border:"border-gray-200"} ${!a&&"opacity-60"}`,children:[e.jsx("div",{className:`absolute top-4 right-4 px-3 py-1 rounded-full text-xs font-bold ${n.bg} ${n.text}`,children:r.rarity.toUpperCase()}),e.jsx("div",{className:"text-6xl mb-4 flex items-center justify-center",children:a?e.jsx(c.div,{initial:{scale:0},animate:{scale:1,rotate:[0,10,-10,0]},transition:{duration:.5},children:r.icon}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"blur-sm opacity-30",children:r.icon}),e.jsx(u,{className:"absolute inset-0 m-auto text-gray-400",size:32})]})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 text-center",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:r.description}),!a&&r.progress>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[r.current,"/",r.requirement]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${r.progress}%`}})})]}),e.jsx("div",{className:"text-center",children:a?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600 font-semibold",children:[e.jsx(v,{size:16,fill:"currentColor"}),e.jsx("span",{children:"UNLOCKED"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(r.unlockedAt).toLocaleDateString()}),e.jsxs("div",{className:"inline-block px-4 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full text-white font-bold text-sm shadow-md animate-pulse",children:["+",r.xpReward," XP"]}),e.jsx(c.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},children:e.jsx("span",{className:"text-2xl",children:"âœ¨"})})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-500",children:[e.jsx(u,{size:16}),e.jsx("span",{className:"font-semibold",children:"LOCKED"})]})})]})};export{I as default};
