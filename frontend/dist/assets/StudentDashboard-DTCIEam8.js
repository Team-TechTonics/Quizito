import{b as y,r as m,j as e,m as c,T as b,Z as N,L as i,a as d,U as v,i as w,g as z}from"./index-D94il1hI.js";import"./api-DRyY-k3C.js";import{c as S}from"./classService-B5TVx5-k.js";import{F as k}from"./flame-BxkD0w7v.js";import{B as D}from"./book-open-BMkCaEYn.js";import{T as A}from"./trending-up-CDV_flEY.js";import{F as p}from"./file-text-CgTn6Yfy.js";import{C}from"./calendar-BAOKU7BH.js";import{S as R}from"./swords-BFCSXTvl.js";const T=[{id:"math_001",title:"Algebra Basics",category:"Mathematics",difficulty:"easy"},{id:"math_002",title:"Advanced Calculus",category:"Mathematics",difficulty:"hard"},{id:"sci_001",title:"Physics: Mechanics",category:"Science",difficulty:"medium"},{id:"cs_001",title:"Python Fundamentals",category:"Computer Science",difficulty:"easy"},{id:"cs_002",title:"Data Structures",category:"Computer Science",difficulty:"medium"}],L={getRecommendations:(a=[])=>{const r=a.filter(t=>t.score<70),l={};r.forEach(t=>{const o=t.quizCategory||"General";l[o]=(l[o]||0)+1});const h=Object.keys(l).sort((t,o)=>l[o]-l[t])[0];let n=[];return h&&(n=T.filter(t=>t.category===h&&t.difficulty==="easy").map(t=>({...t,reason:`Because you struggled with ${h}`,type:"Review"}))),n.length===0&&(n=[{id:"rec_001",title:"Intro to Algorithms",category:"Computer Science",reason:"Popular among students like you",type:"Trending",difficulty:"medium"},{id:"rec_002",title:"World History",category:"History",reason:"Expand your knowledge",type:"New",difficulty:"easy"}]),n.slice(0,3)}},O=()=>{const{user:a}=y(),[r,l]=m.useState([]),[h,n]=m.useState(!0),[t,o]=m.useState({totalQuizzes:0,averageScore:0,currentStreak:0,rank:0,level:1,points:0}),[g,u]=m.useState([]);m.useEffect(()=>{o({totalQuizzes:a?.stats?.totalQuizzes||0,averageScore:a?.stats?.averageScore||0,currentStreak:a?.stats?.currentStreak||0,rank:a?.stats?.rank||0,level:a?.stats?.level||1,points:a?.stats?.experience||0}),f(),j()},[a]);const j=()=>{const s=a?.history||[],x=L.getRecommendations(s);u(x)},f=async()=>{try{const s=await S.getStudentAssignments();l(s||[])}catch(s){console.error("Failed to fetch assignments",s)}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:["Welcome back, ",a?.username||a?.displayName,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-600",children:"Ready to continue your learning journey?"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx(k,{className:"text-orange-500",size:32}),e.jsx("span",{className:"text-4xl font-bold text-orange-500",children:t.currentStreak})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Day Streak"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-blue-500 rounded-xl",children:e.jsx(D,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:t.totalQuizzes}),e.jsx("p",{className:"text-sm text-blue-600",children:"Quizzes Taken"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-green-500 rounded-xl",children:e.jsx(A,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:[t.averageScore,"%"]}),e.jsx("p",{className:"text-sm text-green-600",children:"Avg Score"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-purple-500 rounded-xl",children:e.jsx(b,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:["#",t.rank||"N/A"]}),e.jsx("p",{className:"text-sm text-purple-600",children:"Global Rank"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-amber-500 rounded-xl",children:e.jsx(N,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-amber-700",children:["Level ",t.level]}),e.jsxs("p",{className:"text-sm text-amber-600",children:[t.points," XP"]})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.length>0&&e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 border-l-4 border-indigo-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[e.jsx(p,{className:"mr-2 text-indigo-600",size:24}),"Assignments Due Soon"]}),e.jsxs("span",{className:"text-sm font-semibold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full",children:[r.length," Pending"]})]}),e.jsxs("div",{className:"space-y-3",children:[r.slice(0,3).map((s,x)=>e.jsx(i,{to:`/play/${s.quiz?._id||s.quiz}`,className:"block group",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl group-hover:bg-indigo-50 transition-colors border border-gray-100 group-hover:border-indigo-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-white rounded-lg shadow-sm text-indigo-600 group-hover:scale-110 transition-transform",children:e.jsx(p,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 group-hover:text-indigo-700 transition-colors",children:s.quiz?.title||"Quiz Assignment"}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center mt-1",children:[e.jsx(C,{size:14,className:"mr-1"}),"Due: ",new Date(s.dueDate).toLocaleDateString()," ",new Date(s.dueDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("span",{className:"bg-gray-200 text-gray-600 text-xs px-2 py-0.5 rounded-full",children:s.className})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${new Date(s.dueDate)<new Date?"bg-red-100 text-red-600":new Date(s.dueDate)<new Date(Date.now()+864e5)?"bg-orange-100 text-orange-600":"bg-green-100 text-green-600"}`,children:new Date(s.dueDate)<new Date?"Overdue":new Date(s.dueDate)<new Date(Date.now()+864e5)?"Due Tomorrow":"Upcoming"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center text-gray-400 group-hover:bg-indigo-600 group-hover:text-white transition-all shadow-sm",children:e.jsx(d,{size:16})})]})]})},x)),r.length>3&&e.jsxs("button",{className:"w-full text-center text-indigo-600 font-medium py-2 hover:underline",children:["View all ",r.length," assignments"]})]})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(i,{to:"/join-quiz",className:"group bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl p-6 text-white hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Join Quiz"}),e.jsx("p",{className:"text-indigo-100",children:"Enter a room code"})]}),e.jsx(d,{className:"group-hover:translate-x-2 transition-transform",size:24})]})}),e.jsx(i,{to:"/explore",className:"group bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl p-6 text-white hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Browse Quizzes"}),e.jsx("p",{className:"text-blue-100",children:"Explore topics"})]}),e.jsx(d,{className:"group-hover:translate-x-2 transition-transform",size:24})]})}),e.jsx(i,{to:"/friends",className:"group bg-gradient-to-r from-pink-500 to-rose-500 rounded-2xl p-6 text-white hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Friends"}),e.jsx("p",{className:"text-pink-100",children:"Connect & Compete"})]}),e.jsx(v,{className:"group-hover:scale-110 transition-transform",size:24})]})}),e.jsx(i,{to:"/challenges",className:"group bg-gradient-to-r from-red-500 to-orange-600 rounded-2xl p-6 text-white hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Challenges"}),e.jsx("p",{className:"text-red-100",children:"Battle friends"})]}),e.jsx(R,{className:"group-hover:scale-110 transition-transform",size:24})]})}),e.jsx(i,{to:"/leaderboard",className:"group bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl p-6 text-white hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Leaderboard"}),e.jsx("p",{className:"text-amber-100",children:"See rankings"})]}),e.jsx(d,{className:"group-hover:translate-x-2 transition-transform",size:24})]})}),e.jsx(i,{to:"/profile",className:"group bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 text-white hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"My Progress"}),e.jsx("p",{className:"text-green-100",children:"Track learning"})]}),e.jsx(d,{className:"group-hover:translate-x-2 transition-transform",size:24})]})})]})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(w,{className:"text-blue-600",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Mathematics Quiz"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Completed 2 hours ago"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-green-600",children:"85%"}),e.jsx("p",{className:"text-xs text-gray-500",children:"+50 XP"})]})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No recent activity"}),e.jsx(i,{to:"/explore",className:"text-indigo-600 hover:underline",children:"Start a quiz now!"})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Recommended for You"}),e.jsxs("div",{className:"space-y-3",children:[g.map((s,x)=>e.jsxs("div",{className:"p-4 border-2 border-gray-200 rounded-xl hover:border-indigo-300 transition-colors cursor-pointer",onClick:()=>console.log("Navigate to:",s.id),children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[s.category," â€¢ ",s.type]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s.difficulty==="easy"?"bg-green-100 text-green-700":s.difficulty==="medium"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:s.difficulty.charAt(0).toUpperCase()+s.difficulty.slice(1)}),e.jsx(d,{size:16,className:"text-gray-400"})]}),s.reason&&e.jsxs("p",{className:"text-xs text-indigo-500 mt-2 font-medium",children:["ðŸ’¡ ",s.reason]})]},x)),g.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center",children:"Complete more quizzes to get personal recommendations!"})]})]}),e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-3xl shadow-xl p-6 text-white",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Latest Achievement"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(z,{size:40})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"First Steps"}),e.jsx("p",{className:"text-purple-100 text-sm",children:"Complete your first quiz"})]})]})]})]})]})})};export{O as default};
