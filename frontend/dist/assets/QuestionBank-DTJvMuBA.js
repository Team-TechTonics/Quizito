import{c as k,b as A,r,z as f,j as e,n as E,A as M,m as _,q as D,a as B}from"./index-D94il1hI.js";import"./api-DRyY-k3C.js";import{q as F}from"./quizService-Dx9Ufqno.js";import{B as I}from"./book-open-BMkCaEYn.js";import{S as p}from"./search-BIwijdH4.js";import{C as $}from"./copy-DoTip3Ss.js";const q=k("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),J=()=>{const{user:l}=A(),[y,d]=r.useState(!0),[u,j]=r.useState([]),[x,b]=r.useState([]),[o,N]=r.useState(""),[n,v]=r.useState("all"),[c,w]=r.useState("all"),[R,H]=r.useState("all"),[m,S]=r.useState({total:0,types:{},difficulties:{}});r.useEffect(()=>{Q()},[l]),r.useEffect(()=>{T()},[o,n,c,u]);const Q=async()=>{if(l){d(!0);try{const s=await F.getUserQuizzes(l._id||l.id);let a=[];s.forEach(t=>{t.questions&&Array.isArray(t.questions)&&t.questions.forEach(i=>{a.push({...i,sourceQuizId:t._id||t.id,sourceQuizTitle:t.title,_id:i._id||`temp_${Math.random().toString(36).substr(2,9)}`})})}),j(a),C(a)}catch(s){console.error("Failed to fetch questions:",s),f.error("Failed to load question bank")}finally{d(!1)}}},C=s=>{const a={},t={};s.forEach(i=>{const g=i.type||"multiple-choice";a[g]=(a[g]||0)+1;const h=i.difficulty||"medium";t[h]=(t[h]||0)+1}),S({total:s.length,types:a,difficulties:t})},T=()=>{let s=[...u];if(o){const a=o.toLowerCase();s=s.filter(t=>t.question&&t.question.toLowerCase().includes(a)||t.sourceQuizTitle&&t.sourceQuizTitle.toLowerCase().includes(a))}n!=="all"&&(s=s.filter(a=>a.type===n)),c!=="all"&&(s=s.filter(a=>a.difficulty===c)),b(s)},L=s=>{navigator.clipboard.writeText(s),f.success("Question copied to clipboard")},z=s=>{switch(s?.toLowerCase()){case"easy":return"bg-green-100 text-green-700";case"hard":return"bg-red-100 text-red-700";default:return"bg-yellow-100 text-yellow-700"}};return y?e.jsx(E,{}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(I,{className:"text-indigo-600"}),"Question Bank"]}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["Manage and reuse questions from all your quizzes (",m.total," total)"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Questions"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mt-2",children:m.total})]}),e.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl",children:e.jsx(q,{className:"w-6 h-6 text-indigo-600"})})]})})}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-6 flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(p,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search questions or quiz titles...",value:o,onChange:s=>N(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[e.jsxs("select",{value:c,onChange:s=>w(s.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none bg-white",children:[e.jsx("option",{value:"all",children:"All Difficulties"}),e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]}),e.jsxs("select",{value:n,onChange:s=>v(s.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none bg-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"multiple-choice",children:"Multiple Choice"}),e.jsx("option",{value:"true-false",children:"True/False"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{children:x.map((s,a)=>e.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow group",children:e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${z(s.difficulty)}`,children:s.difficulty||"Medium"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600 font-medium",children:s.type?.replace("-"," ")||"Multiple Choice"}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:["from ",e.jsx("span",{className:"font-medium text-gray-600",children:s.sourceQuizTitle})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:s.question}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2",children:s.options?.map((t,i)=>e.jsxs("div",{className:`px-3 py-2 rounded-lg text-sm flex items-center gap-2 ${t.isCorrect?"bg-green-50 text-green-700 border border-green-100":"bg-gray-50 text-gray-600 border border-gray-100"}`,children:[t.isCorrect&&e.jsx(D,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"truncate",children:t.text})]},i))})]}),e.jsxs("div",{className:"flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>L(s.question),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Copy Question",children:e.jsx($,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:e.jsx(B,{className:"w-5 h-5"})})]})]})},s._id+a))}),x.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"text-gray-400 w-8 h-8"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"No questions found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})]})]})})};export{J as default};
