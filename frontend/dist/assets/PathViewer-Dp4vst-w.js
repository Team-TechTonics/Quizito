import{c as x,l as S,h as C,r as c,R as M,j as e,q as d,D as f,m as q,S as L,P as $}from"./index-D94il1hI.js";const E=x("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);const I=x("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const B=x("FileQuestion",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),H=()=>{const{pathId:o}=S(),u=C(),[r,j]=c.useState(0),{learningPathService:y}=require("../services"),[a,m]=c.useState(null),[v,h]=c.useState(!0),[b,N]=c.useState(null);if(M.useEffect(()=>{o&&(async()=>{try{h(!0);const s=await y.getPathById(o);m(s)}catch(s){console.error("Failed to fetch path:",s),N("Failed to load learning path.")}finally{h(!1)}})()},[o]),v)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(b||!a)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 text-gray-600",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Oops!"}),e.jsx("p",{children:b||"Path not found"}),e.jsx("button",{onClick:()=>u("/learning-paths"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Go Back"})]});const w=(t,s)=>{m(g=>{const P=g.modules.map(n=>{if(n.id!==t)return n;const i=n.steps.map(l=>l.id===s?{...l,status:"completed",score:l.type==="quiz"?100:void 0}:l),p=i.findIndex(l=>l.id===s);return p<i.length-1&&(i[p+1].status="active"),{...n,steps:i}});return{...g,modules:P}})},k=t=>{switch(t){case"quiz":return e.jsx(B,{});case"video":return e.jsx($,{});case"reading":return e.jsx(E,{});case"project":return e.jsx(L,{});default:return e.jsx(d,{})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col md:flex-row",children:[e.jsxs("div",{className:"w-full md:w-80 bg-white border-r border-gray-200 flex-shrink-0 md:h-screen md:sticky md:top-0 overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>u("/learning-paths"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(I,{})}),e.jsx("h2",{className:"font-bold text-gray-800 truncate",children:a.title})]}),e.jsxs("div",{className:"p-6 text-center border-b border-gray-100 bg-gradient-to-br from-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"w-20 h-20 mx-auto bg-white rounded-full flex items-center justify-center shadow-md mb-3 relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-100"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-500 border-t-transparent animate-spin-slow",style:{transform:`rotate(${a.progress*3.6}deg)`}}),e.jsxs("span",{className:"text-xl font-bold text-blue-600",children:[a.progress,"%"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:[a.earnedXP," / ",a.totalXP," XP Earned"]})]}),e.jsx("div",{className:"p-2",children:a.modules.map((t,s)=>e.jsxs("div",{onClick:()=>t.status!=="locked"&&j(s),className:`p-4 rounded-xl mb-2 cursor-pointer transition-all ${r===s?"bg-blue-50 border-blue-200 shadow-sm ring-1 ring-blue-100":t.status==="locked"?"opacity-50 bg-gray-50 cursor-not-allowed":"hover:bg-gray-50 border border-transparent"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("span",{className:`text-xs font-bold uppercase tracking-wider ${r===s?"text-blue-600":"text-gray-400"}`,children:["Module ",s+1]}),t.status==="completed"&&e.jsx(d,{className:"text-green-500"}),t.status==="locked"&&e.jsx(f,{className:"text-gray-400"})]}),e.jsx("h3",{className:`font-semibold text-sm mb-1 ${r===s?"text-gray-900":"text-gray-700"}`,children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{children:[t.steps.length," Steps"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[t.xp," XP"]})]})]},t.id))})]}),e.jsx("div",{className:"flex-1 p-6 md:p-10",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("span",{className:"text-blue-600 font-bold tracking-wide uppercase text-sm mb-2 block",children:["Module ",r+1]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:a.modules[r].title}),e.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:a.modules[r].description})]}),e.jsx("div",{className:"space-y-4",children:a.modules[r].steps.map((t,s)=>e.jsxs("div",{className:`bg-white rounded-2xl border p-5 flex items-center justify-between transition-all group ${t.status==="locked"?"border-gray-100 opacity-60":"border-gray-200 hover:border-blue-300 hover:shadow-md cursor-pointer"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl shadow-sm ${t.status==="completed"?"bg-green-100 text-green-600":t.status==="active"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"}`,children:k(t.type)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 group-hover:text-blue-600 transition-colors",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1",children:[e.jsx("span",{className:"uppercase font-medium bg-gray-100 px-2 py-0.5 rounded text-[10px]",children:t.type}),t.duration&&e.jsx("span",{children:t.duration}),t.questions&&e.jsxs("span",{children:[t.questions," Questions"]})]})]})]}),e.jsx("div",{children:t.status==="completed"?e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("span",{className:"text-green-600 font-bold text-sm flex items-center gap-1",children:["Completed ",e.jsx(d,{})]}),t.score&&e.jsxs("span",{className:"text-xs text-gray-400",children:["Score: ",t.score,"%"]})]}):t.status==="active"?e.jsx("button",{onClick:()=>w(a.modules[r].id,t.id),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium text-sm transition-colors shadow-lg shadow-blue-200",children:"Start"}):e.jsx(f,{className:"text-gray-300 text-xl"})})]},t.id))})]},r)})})]})};export{H as default};
