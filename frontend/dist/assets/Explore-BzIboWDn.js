import{c as U,j as e,A as _,m as D,X as $,S,U as q,C as Q,L as u,P as G,a as V,u as Z,b as I,r as c,d as K,Z as F,B as X,H as J,z as W}from"./index-D94il1hI.js";import{B as Y}from"./book-open-BMkCaEYn.js";import{S as L}from"./search-BIwijdH4.js";import{F as ee}from"./filter-UrZHCNGR.js";import{R as se}from"./refresh-cw-DB7rEJja.js";import{T as R}from"./trending-up-CDV_flEY.js";const te=U("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),le=({quiz:i,isOpen:z,onClose:o})=>{if(!i)return null;const{_id:b,title:l,description:m,category:n,difficulty:g,questions:d=[],duration:p,rating:j=4.5,ratingCount:N=0,plays:f=0,topics:y=[]}=i,h=r=>{switch(r?.toLowerCase()){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-amber-600 bg-amber-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},v=d.slice(0,3);return e.jsx(_,{children:z&&e.jsxs(e.Fragment,{children:[e.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:o,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs(D.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 px-8 py-6 text-white",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx($,{size:24})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 rounded-full text-sm font-semibold mb-3",children:n||"General"}),e.jsx("h2",{className:"text-3xl font-bold mb-2",children:l}),m&&e.jsx("p",{className:"text-white/90",children:m})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{size:18,className:"fill-yellow-300 text-yellow-300"}),e.jsxs("span",{children:[j.toFixed(1)," (",N," reviews)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{size:18}),e.jsxs("span",{children:[f.toLocaleString()," plays"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{size:18}),e.jsxs("span",{children:[p||15," min"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{size:18}),e.jsxs("span",{children:[d.length," questions"]})]})]})]}),e.jsxs("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-300px)]",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Difficulty"}),e.jsx("span",{className:`inline-block px-4 py-2 rounded-xl font-medium ${h(g)}`,children:g||"Medium"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Estimated Time"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800",children:[p||15," minutes"]})]})]}),y&&y.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Topics Covered"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((r,x)=>e.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-700 rounded-full text-sm font-medium",children:r},x))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Sample Questions"}),e.jsx("div",{className:"space-y-4",children:v.length>0?v.map((r,x)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[e.jsxs("p",{className:"font-semibold text-gray-800 mb-2",children:[x+1,". ",r.question||r.text]}),r.options&&e.jsx("div",{className:"space-y-2 ml-4",children:r.options.map((C,w)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300 flex items-center justify-center text-xs",children:String.fromCharCode(65+w)}),e.jsx("span",{className:"text-gray-700",children:C})]},w))})]},x)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No preview available"})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Question Distribution"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Easy"}),e.jsx("span",{className:"text-sm font-semibold",children:"30%"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:"30%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Medium"}),e.jsx("span",{className:"text-sm font-semibold",children:"50%"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500 rounded-full",style:{width:"50%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Hard"}),e.jsx("span",{className:"text-sm font-semibold",children:"20%"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500 rounded-full",style:{width:"20%"}})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Student Reviews"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((r,x)=>e.jsx(S,{size:14,className:"fill-yellow-400 text-yellow-400"},x))}),e.jsx("span",{className:"text-sm font-semibold",children:"Great quiz!"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Really helped me understand the concepts better. Highly recommend!"})]})})]})]}),e.jsx("div",{className:"border-t border-gray-200 px-8 py-6 bg-gray-50",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:o,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-100 transition-colors",children:"Close"}),e.jsxs(u,{to:`/play/${b}`,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold hover:shadow-lg transition-all flex items-center justify-center space-x-2",children:[e.jsx(G,{size:20}),e.jsx("span",{children:"Start Quiz"}),e.jsx(V,{size:20})]})]})})]})})})]})})},oe=()=>{const{quizzes:i,fetchQuizzes:z,loading:o}=Z(),{user:b}=I(),[l,m]=c.useState(""),[n,g]=c.useState("all"),[d,p]=c.useState("all"),[j,N]=c.useState("newest"),[f,y]=c.useState(!1),[h,v]=c.useState([]),[r,x]=c.useState(null),[C,w]=c.useState(!1),E=["All Categories","General Knowledge","Science","Technology","History","Geography","Sports","Entertainment","Mathematics","Literature","Art","Music","Business","Health","Other"],T=[{id:"all",label:"All Difficulties",color:"bg-gray-100"},{id:"easy",label:"Easy",color:"bg-green-100 text-green-800"},{id:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{id:"hard",label:"Hard",color:"bg-red-100 text-red-800"}],B=[{id:"newest",label:"Newest",icon:e.jsx(Q,{size:16})},{id:"popular",label:"Most Popular",icon:e.jsx(R,{size:16})},{id:"difficulty",label:"Difficulty",icon:e.jsx(X,{size:16})},{id:"questions",label:"Most Questions",icon:e.jsx(J,{size:16})},{id:"rating",label:"Highest Rated",icon:e.jsx(S,{size:16})}];c.useEffect(()=>{z()},[]),c.useEffect(()=>{H()},[i,l,n,d,j]);const H=()=>{let s=[...i];if(l){const t=l.toLowerCase();s=s.filter(a=>a.title.toLowerCase().includes(t)||a.description.toLowerCase().includes(t)||a.category.toLowerCase().includes(t)||a.createdBy?.username.toLowerCase().includes(t))}n!=="all"&&(s=s.filter(t=>t.category===n)),d!=="all"&&(s=s.filter(t=>t.difficulty===d)),s.sort((t,a)=>{switch(j){case"newest":return new Date(a.createdAt)-new Date(t.createdAt);case"popular":return(a.popularity||0)-(t.popularity||0);case"difficulty":const A={easy:1,medium:2,hard:3};return A[a.difficulty]-A[t.difficulty];case"questions":return(a.questions?.length||0)-(t.questions?.length||0);case"rating":return(a.rating||0)-(t.rating||0);default:return 0}}),v(s)},k=()=>{m(""),g("all"),p("all"),N("newest"),W.success("Filters cleared")},M=()=>[...i].sort((s,t)=>(t.popularity||0)-(s.popularity||0)).slice(0,4),P=()=>[...i].sort((s,t)=>new Date(t.createdAt)-new Date(s.createdAt)).slice(0,4),O=()=>{const s={};return i.forEach(t=>{s[t.category]=(s[t.category]||0)+1}),Object.entries(s).sort((t,a)=>a[1]-t[1]).slice(0,8)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-primary-600 to-accent-600 text-white",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsx("div",{className:"container mx-auto px-4 py-16 relative",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h1",{className:"text-5xl font-bold mb-6",children:"Explore Amazing Quizzes"}),e.jsx("p",{className:"text-xl opacity-90 mb-10",children:"Discover thousands of quizzes created by educators, students, and quiz enthusiasts worldwide. Test your knowledge, learn something new, and compete with others!"}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:24}),e.jsx("input",{type:"text",value:l,onChange:s=>m(s.target.value),placeholder:"Search quizzes by title, category, or creator...",className:"w-full pl-12 pr-4 py-4 rounded-2xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-white/30"}),l&&e.jsx("button",{onClick:()=>m(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx($,{size:20})})]})})]})})]}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"lg:w-1/4 space-y-6",children:[e.jsxs("button",{onClick:()=>y(!f),className:"lg:hidden flex items-center justify-between w-full p-4 bg-white rounded-xl shadow-md",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{size:20}),e.jsx("span",{className:"font-semibold",children:"Filters & Sorting"})]}),f?e.jsx(te,{size:20}):e.jsx(K,{size:20})]}),e.jsxs("div",{className:`${f?"block":"hidden"} lg:block space-y-6`,children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center space-x-2",children:[e.jsx(se,{size:20}),e.jsx("span",{children:"Sort By"})]}),e.jsx("div",{className:"space-y-2",children:B.map(s=>e.jsxs("button",{onClick:()=>N(s.id),className:`w-full flex items-center space-x-3 p-3 rounded-lg transition-all ${j===s.id?"bg-primary-50 text-primary-700 border-2 border-primary-200":"hover:bg-gray-50"}`,children:[s.icon,e.jsx("span",{children:s.label})]},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Category"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:E.map(s=>e.jsx("button",{onClick:()=>g(s==="All Categories"?"all":s),className:`w-full text-left p-3 rounded-lg transition-all ${n===(s==="All Categories"?"all":s)?"bg-primary-50 text-primary-700 font-semibold":"hover:bg-gray-50"}`,children:s},s))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Difficulty"}),e.jsx("div",{className:"space-y-2",children:T.map(s=>e.jsx("button",{onClick:()=>p(s.id),className:`w-full text-left p-3 rounded-lg transition-all ${d===s.id?`${s.color} font-semibold ring-2 ring-offset-2 ring-opacity-50`:"hover:bg-gray-50"}`,children:s.label},s.id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-primary-50 to-accent-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Quiz Stats"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Quizzes"}),e.jsx("span",{className:"font-bold",children:i.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Active Users"}),e.jsx("span",{className:"font-bold",children:"1,234+"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Avg. Questions"}),e.jsx("span",{className:"font-bold",children:"12"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Completion Rate"}),e.jsx("span",{className:"font-bold text-green-600",children:"89%"})]})]})]}),e.jsx("button",{onClick:k,className:"w-full p-4 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"Clear All Filters"})]})]}),e.jsxs("div",{className:"lg:w-3/4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:l?`Results for "${l}"`:"All Quizzes"}),e.jsxs("p",{className:"text-gray-600",children:[h.length," quizzes found",n!=="all"&&` in ${n}`,d!=="all"&&` • ${d} difficulty`]})]}),b&&e.jsxs(u,{to:"/create-quiz",className:"btn-primary flex items-center space-x-2 whitespace-nowrap",children:[e.jsx(F,{size:20}),e.jsx("span",{children:"Create Quiz"})]})]}),o&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(s=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 w-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-6 w-16 bg-gray-200 rounded"})]})]},s))}),!o&&e.jsxs(e.Fragment,{children:[!l&&n==="all"&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold flex items-center space-x-2",children:[e.jsx(R,{className:"text-yellow-500",size:24}),e.jsx("span",{children:"Trending Now"})]}),e.jsx(u,{to:"/explore?sort=popular",className:"text-primary-600 hover:text-primary-700 font-medium",children:"View all trending →"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:M().map(s=>e.jsx(QuizCard,{quiz:s,featured:!0},s._id))})]}),!l&&n==="all"&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold flex items-center space-x-2",children:[e.jsx(Q,{className:"text-blue-500",size:24}),e.jsx("span",{children:"Recently Added"})]}),e.jsx(u,{to:"/explore?sort=newest",className:"text-primary-600 hover:text-primary-700 font-medium",children:"View all recent →"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:P().map(s=>e.jsx(QuizCard,{quiz:s},s._id))})]}),e.jsx("div",{children:h.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(s=>e.jsx(QuizCard,{quiz:s},s._id))}),h.length>12&&e.jsx("div",{className:"text-center mt-12",children:e.jsx("button",{className:"btn-secondary px-8 py-3",children:"Load More Quizzes"})})]}):e.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(L,{className:"text-gray-400",size:48})}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No quizzes found"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:l?`No quizzes match "${l}". Try a different search term.`:"No quizzes match your current filters. Try clearing some filters."}),e.jsx("button",{onClick:k,className:"btn-primary",children:"Clear Filters"})]})})]}),!o&&i.length>0&&!l&&e.jsxs("div",{className:"mt-12",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Popular Categories"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:O().map(([s,t],a)=>e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:border-primary-200 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold truncate",children:s}),e.jsx("span",{className:"bg-primary-100 text-primary-800 text-sm px-2 py-1 rounded-full",children:t})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-accent-500 rounded-full",style:{width:`${t/i.length*100}%`}})})})]},s))})]})]})]})}),b&&e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-accent-600 rounded-3xl p-12 text-white text-center",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Ready to share your knowledge?"}),e.jsx("p",{className:"text-xl opacity-90 mb-8",children:"Create your own quiz and challenge the community. It only takes a few minutes!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(u,{to:"/create-quiz",className:"bg-white text-primary-600 hover:bg-gray-100 px-8 py-4 rounded-xl font-bold text-lg transition-colors inline-flex items-center justify-center space-x-2",children:[e.jsx(F,{size:24}),e.jsx("span",{children:"Create a Quiz"})]}),e.jsxs(u,{to:"/create-quiz",className:"bg-transparent border-2 border-white text-white hover:bg-white/10 px-8 py-4 rounded-xl font-bold text-lg transition-colors inline-flex items-center justify-center space-x-2",children:[e.jsx(q,{size:24}),e.jsx("span",{children:"Host a Session"})]})]})]})})}),e.jsx(le,{quiz:r,isOpen:C,onClose:()=>w(!1)})]})};export{oe as default};
